<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Abeeway Geolocation Module SDK: aos-core/aos/aos_system.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Abeeway Geolocation Module SDK
   </div>
   <div id="projectbrief">A FreeRTOS based Software Development Kit for the Abeeway Geolocation Module</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0b7dd5bfba1754035fd7f47192cfa2df.html">aos-core</a></li><li class="navelem"><a class="el" href="dir_a9da6ba209ef41d5d3e2f11288c19cc5.html">aos</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">aos_system.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>System management and ISR to background process deferring.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &quot;stdbool.h&quot;</code><br />
<code>#include &quot;<a class="el" href="aos__common_8h_source.html">aos_common.h</a>&quot;</code><br />
<code>#include &quot;FreeRTOS.h&quot;</code><br />
<code>#include &quot;timers.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for aos_system.h:</div>
<div class="dyncontent">
<div class="center"><img src="aos__system_8h__incl.png" border="0" usemap="#aos-core_2aos_2aos__system_8h" alt=""/></div>
<map name="aos-core_2aos_2aos__system_8h" id="aos-core_2aos_2aos__system_8h">
<area shape="rect" title="System management and ISR to background process deferring." alt="" coords="86,5,269,32"/>
<area shape="rect" title=" " alt="" coords="49,155,114,181"/>
<area shape="rect" title=" " alt="" coords="23,80,98,107"/>
<area shape="rect" href="aos__common_8h.html" title="Common definitions." alt="" coords="122,80,233,107"/>
<area shape="rect" title=" " alt="" coords="258,80,354,107"/>
<area shape="rect" title=" " alt="" coords="378,80,447,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="aos__system_8h__dep__incl.png" border="0" usemap="#aos-core_2aos_2aos__system_8hdep" alt=""/></div>
<map name="aos-core_2aos_2aos__system_8hdep" id="aos-core_2aos_2aos__system_8hdep">
<area shape="rect" title="System management and ISR to background process deferring." alt="" coords="759,5,941,32"/>
<area shape="rect" href="aos__gpio_8h.html" title="GPIO driver." alt="" coords="371,87,535,114"/>
<area shape="rect" href="aos__nmea__parser_8h.html" title=" " alt="" coords="568,80,729,121"/>
<area shape="rect" href="aos__uart_8h.html" title="UART driver." alt="" coords="829,87,991,114"/>
<area shape="rect" href="aos__usb__cdc_8h.html" title="USB driver (serial communication support &#45; CDC&#45; only)." alt="" coords="720,169,871,211"/>
<area shape="rect" href="srv__gnss__mt3333_8h.html" title="GNSS service using the MT3333." alt="" coords="1069,169,1223,211"/>
<area shape="rect" href="srv__gnss_8h.html" title="GNSS service." alt="" coords="1067,87,1231,114"/>
<area shape="rect" href="aos__adc_8h.html" title="Analog to Digital Converter (ADC)" alt="" coords="5,177,167,203"/>
<area shape="rect" href="aos__calib__hsi_8h.html" title="HSI calibration." alt="" coords="191,169,347,211"/>
<area shape="rect" href="aos__lr1110__mgr_8h.html" title="LR1110 manager." alt="" coords="371,169,534,211"/>
<area shape="rect" href="aos__rf__switch_8h.html" title="RF switch driver." alt="" coords="559,169,696,211"/>
<area shape="rect" href="srv__gnss__lr1110_8h.html" title="GNSS LR1110 service." alt="" coords="289,259,443,300"/>
<area shape="rect" href="srv__wifi__scan_8h.html" title="WIFI scan service." alt="" coords="467,259,612,300"/>
<area shape="rect" href="srv__lora_8h.html" title="LoRa service." alt="" coords="637,266,794,293"/>
<area shape="rect" href="srv__geoloc__common_8h.html" title="Common definition to all geolocation engines." alt="" coords="458,348,621,389"/>
<area shape="rect" href="srv__geoloc__basic_8h.html" title="Geolocation engine using the fallback method. Geolocation technologies are scheduled and results are ..." alt="" coords="458,437,621,479"/>
<area shape="rect" href="srv__cli_8h.html" title="Command Line Interface service." alt="" coords="895,177,1045,203"/>
</map>
</div>
</div>
<p><a href="aos__system_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga180fc342b26cbf6ec77a7f43bd8fb353"><td class="memItemLeft" align="right" valign="top">
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga180fc342b26cbf6ec77a7f43bd8fb353">AOS_SYSTEM_MAX_USER_CALLBACK_ENTRY</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga180fc342b26cbf6ec77a7f43bd8fb353"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of user than can be registered for ISR to background process deferring. <br /></td></tr>
<tr class="separator:ga180fc342b26cbf6ec77a7f43bd8fb353"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gaaa04559ee2d50d2a2ddbe2e408957a39"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gaaa04559ee2d50d2a2ddbe2e408957a39">aos_system_user_callback_t</a>) (uint8_t user_id, void *arg)</td></tr>
<tr class="memdesc:gaaa04559ee2d50d2a2ddbe2e408957a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">User callback function definition for ISR to background process deferring.  <a href="group__aos__system.html#gaaa04559ee2d50d2a2ddbe2e408957a39">More...</a><br /></td></tr>
<tr class="separator:gaaa04559ee2d50d2a2ddbe2e408957a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga106980f33ba50e298d56722679e6fc4b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga106980f33ba50e298d56722679e6fc4b">aos_system_isr_to_bkg_users_t</a> { <br />
&#160;&#160;<a class="el" href="group__aos__system.html#gga106980f33ba50e298d56722679e6fc4ba95de9d40dc1b450459540aa6e6516374">aos_system_isr_to_bkg_lpuart1</a>, 
<a class="el" href="group__aos__system.html#gga106980f33ba50e298d56722679e6fc4ba9e00a5d780bddb5e11980c21a0bef71b">aos_system_isr_to_bkg_usart1</a>, 
<a class="el" href="group__aos__system.html#gga106980f33ba50e298d56722679e6fc4ba78dd077688e521198f4bbdbfa562987b">aos_system_isr_to_bkg_usb_cdc</a>, 
<a class="el" href="group__aos__system.html#gga106980f33ba50e298d56722679e6fc4bae330dfd5637c3e6f029582de55f02f8a">aos_system_isr_to_bkg_mac_timer</a>, 
<br />
&#160;&#160;<a class="el" href="group__aos__system.html#gga106980f33ba50e298d56722679e6fc4ba8b980e2e1c9c298f0413dc64e9552803">aos_system_isr_to_bkg_first_free</a>, 
<a class="el" href="group__aos__system.html#gga106980f33ba50e298d56722679e6fc4ba611eb3381ce304d8e2508549172c46dd">aos_system_isr_to_bkg_last_free</a> = AOS_SYSTEM_MAX_USER_CALLBACK_ENTRY -1
<br />
 }</td></tr>
<tr class="memdesc:ga106980f33ba50e298d56722679e6fc4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Users that can be reserved for ISR -&gt; background process deferring.  <a href="group__aos__system.html#ga106980f33ba50e298d56722679e6fc4b">More...</a><br /></td></tr>
<tr class="separator:ga106980f33ba50e298d56722679e6fc4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaea2bc75fa7ab31b53e2ede89e9a396b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gaea2bc75fa7ab31b53e2ede89e9a396b5">aos_system_init</a> (bool enable_watchdog)</td></tr>
<tr class="memdesc:gaea2bc75fa7ab31b53e2ede89e9a396b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the system and create the system thread.  <a href="group__aos__system.html#gaea2bc75fa7ab31b53e2ede89e9a396b5">More...</a><br /></td></tr>
<tr class="separator:gaea2bc75fa7ab31b53e2ede89e9a396b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ce26be7ad94e2582e99a5308a3b2b39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga5ce26be7ad94e2582e99a5308a3b2b39">aos_system_register_user_callback</a> (uint8_t *user_id, <a class="el" href="group__aos__system.html#gaaa04559ee2d50d2a2ddbe2e408957a39">aos_system_user_callback_t</a> callback, void *user_arg)</td></tr>
<tr class="memdesc:ga5ce26be7ad94e2582e99a5308a3b2b39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a user callback. Allocate a user identifier and register the callback to run under the system thread. This is mainly used to move from interruption context to task context. The system retrieves a free user ID and returns it via the user_id parameter.  <a href="group__aos__system.html#ga5ce26be7ad94e2582e99a5308a3b2b39">More...</a><br /></td></tr>
<tr class="separator:ga5ce26be7ad94e2582e99a5308a3b2b39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa21e56dfcdb25af9ff8e1bc02a7e059b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gaa21e56dfcdb25af9ff8e1bc02a7e059b">aos_system_register_callback</a> (uint8_t user_id, <a class="el" href="group__aos__system.html#gaaa04559ee2d50d2a2ddbe2e408957a39">aos_system_user_callback_t</a> callback, void *user_arg)</td></tr>
<tr class="memdesc:gaa21e56dfcdb25af9ff8e1bc02a7e059b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a user callback. Register a user callback with a known user identifier. to run under the system thread. This is mainly used to move from interruption context to task context. This function is generally used by the system itself and used the reserved user identifier.  <a href="group__aos__system.html#gaa21e56dfcdb25af9ff8e1bc02a7e059b">More...</a><br /></td></tr>
<tr class="separator:gaa21e56dfcdb25af9ff8e1bc02a7e059b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacd248eef7d10568aa7db444d883b5d12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gacd248eef7d10568aa7db444d883b5d12">aos_system_unregister_callback</a> (uint8_t user_id)</td></tr>
<tr class="memdesc:gacd248eef7d10568aa7db444d883b5d12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a user callback.  <a href="group__aos__system.html#gacd248eef7d10568aa7db444d883b5d12">More...</a><br /></td></tr>
<tr class="separator:gacd248eef7d10568aa7db444d883b5d12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa36f9d97f9beeffc5da07397388e3070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gaa36f9d97f9beeffc5da07397388e3070">aos_system_trigger_user_callback</a> (uint8_t user_id)</td></tr>
<tr class="memdesc:gaa36f9d97f9beeffc5da07397388e3070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger the system thread for a given user.  <a href="group__aos__system.html#gaa36f9d97f9beeffc5da07397388e3070">More...</a><br /></td></tr>
<tr class="separator:gaa36f9d97f9beeffc5da07397388e3070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaec6220ab6e03a6420408e6901c58127"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gaaec6220ab6e03a6420408e6901c58127">aos_system_read_cpu_temperature</a> (int16_t *temperature)</td></tr>
<tr class="memdesc:gaaec6220ab6e03a6420408e6901c58127"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the CPU temperature.  <a href="group__aos__system.html#gaaec6220ab6e03a6420408e6901c58127">More...</a><br /></td></tr>
<tr class="separator:gaaec6220ab6e03a6420408e6901c58127"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f0bb15aa11bbbc30acae723920132fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__aos__system.html#gad3ecdc146fcc76996620c96df43c1b3f">aos_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga2f0bb15aa11bbbc30acae723920132fa">aos_system_clock_resume</a> (void)</td></tr>
<tr class="memdesc:ga2f0bb15aa11bbbc30acae723920132fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart the main clocks after wake up.  <a href="group__aos__system.html#ga2f0bb15aa11bbbc30acae723920132fa">More...</a><br /></td></tr>
<tr class="separator:ga2f0bb15aa11bbbc30acae723920132fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1aac57b79599208dfafd96360394ee2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga1aac57b79599208dfafd96360394ee2c">aos_system_critical_section_begin</a> (uint32_t *mask)</td></tr>
<tr class="memdesc:ga1aac57b79599208dfafd96360394ee2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enter a critical section.  <a href="group__aos__system.html#ga1aac57b79599208dfafd96360394ee2c">More...</a><br /></td></tr>
<tr class="separator:ga1aac57b79599208dfafd96360394ee2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82da9b160aecd3b711fe00c0e22d9510"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga82da9b160aecd3b711fe00c0e22d9510">aos_system_critical_section_end</a> (uint32_t *mask)</td></tr>
<tr class="memdesc:ga82da9b160aecd3b711fe00c0e22d9510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Leave a critical section.  <a href="group__aos__system.html#ga82da9b160aecd3b711fe00c0e22d9510">More...</a><br /></td></tr>
<tr class="separator:ga82da9b160aecd3b711fe00c0e22d9510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa487d30c01e90cb36e63aca4d56bf77b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gaa487d30c01e90cb36e63aca4d56bf77b">aos_system_get_freertos_timer_expiry</a> (xTimerHandle timer_hdl, bool ms)</td></tr>
<tr class="memdesc:gaa487d30c01e90cb36e63aca4d56bf77b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the remaining time before timer expiry of a FreeRTOS timer.  <a href="group__aos__system.html#gaa487d30c01e90cb36e63aca4d56bf77b">More...</a><br /></td></tr>
<tr class="separator:gaa487d30c01e90cb36e63aca4d56bf77b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadea39bd67dcbef46cd50262466885d4b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#gadea39bd67dcbef46cd50262466885d4b">aos_system_get_freertos_timer_elapsed</a> (xTimerHandle timer_hdl, bool ms)</td></tr>
<tr class="memdesc:gadea39bd67dcbef46cd50262466885d4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the elapsed time by a timer.  <a href="group__aos__system.html#gadea39bd67dcbef46cd50262466885d4b">More...</a><br /></td></tr>
<tr class="separator:gadea39bd67dcbef46cd50262466885d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ebd983b33b19867e65c76ba5b8ca768"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__system.html#ga6ebd983b33b19867e65c76ba5b8ca768">aos_system_get_build_date</a> (void)</td></tr>
<tr class="memdesc:ga6ebd983b33b19867e65c76ba5b8ca768"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the date and the time of the build.  <a href="group__aos__system.html#ga6ebd983b33b19867e65c76ba5b8ca768">More...</a><br /></td></tr>
<tr class="separator:ga6ebd983b33b19867e65c76ba5b8ca768"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>System management and ISR to background process deferring. </p>
<p>The ISR to background process deferring consists of deferring the ISR processing in a usual RTOS thread. The system thread used for this purpose has the highest priority (7).</p>
<p>Copyright (C) 2022, Abeeway (www.abeeway.com). All Rights Reserved. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
