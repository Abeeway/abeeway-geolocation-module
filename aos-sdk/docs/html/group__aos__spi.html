<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Abeeway Geolocation Module SDK: SPI driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Abeeway Geolocation Module SDK
   </div>
   <div id="projectbrief">A FreeRTOS based Software Development Kit for the Abeeway Geolocation Module</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SPI driver</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaos__spi__ioctl__t.html">aos_spi_ioctl_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO control request and data.  <a href="structaos__spi__ioctl__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structaos__spi__master__t.html">aos_spi_master_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure describing a SPI bus acting as master.  <a href="structaos__spi__master__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab3e43e983ef9dc68df9b3fda4bf1a331"><td class="memItemLeft" align="right" valign="top"><a id="gab3e43e983ef9dc68df9b3fda4bf1a331"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gab3e43e983ef9dc68df9b3fda4bf1a331">aos_spi_handle_invalid</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="memdesc:gab3e43e983ef9dc68df9b3fda4bf1a331"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invalid SPI handle. <br /></td></tr>
<tr class="separator:gab3e43e983ef9dc68df9b3fda4bf1a331"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8524f178aa45b211fe3c77046fc341c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gaa8524f178aa45b211fe3c77046fc341c">CONFIG_SPI_IO_POLLING</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:gaa8524f178aa45b211fe3c77046fc341c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Driver mode.  <a href="group__aos__spi.html#gaa8524f178aa45b211fe3c77046fc341c">More...</a><br /></td></tr>
<tr class="separator:gaa8524f178aa45b211fe3c77046fc341c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8186f7aff413fd52958699615f0a8e5c"><td class="memItemLeft" align="right" valign="top"><a id="ga8186f7aff413fd52958699615f0a8e5c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga8186f7aff413fd52958699615f0a8e5c">CONFIG_SPI_IO_INTERRUPT</a>&#160;&#160;&#160;1</td></tr>
<tr class="memdesc:ga8186f7aff413fd52958699615f0a8e5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Needs a semaphore. Careful with low power modes. <br /></td></tr>
<tr class="separator:ga8186f7aff413fd52958699615f0a8e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bf5915b762beae5026e44ec7af50a5e"><td class="memItemLeft" align="right" valign="top"><a id="ga6bf5915b762beae5026e44ec7af50a5e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga6bf5915b762beae5026e44ec7af50a5e">CONFIG_SPI_IO_DMA</a>&#160;&#160;&#160;2</td></tr>
<tr class="memdesc:ga6bf5915b762beae5026e44ec7af50a5e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Needs a semaphore, may require proper buffer alignment. Careful with low power modes. <br /></td></tr>
<tr class="separator:ga6bf5915b762beae5026e44ec7af50a5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16c3c405924ded71f716667661e0ee7c"><td class="memItemLeft" align="right" valign="top"><a id="ga16c3c405924ded71f716667661e0ee7c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga16c3c405924ded71f716667661e0ee7c">CONFIG_SPI_IO</a>&#160;&#160;&#160;(<a class="el" href="group__aos__spi.html#gaa8524f178aa45b211fe3c77046fc341c">CONFIG_SPI_IO_POLLING</a>)</td></tr>
<tr class="memdesc:ga16c3c405924ded71f716667661e0ee7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default: polling. <br /></td></tr>
<tr class="separator:ga16c3c405924ded71f716667661e0ee7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga64a4e66670e4769b51b25f2da735a6b7"><td class="memItemLeft" align="right" valign="top"><a id="ga64a4e66670e4769b51b25f2da735a6b7"></a>
typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a></td></tr>
<tr class="memdesc:ga64a4e66670e4769b51b25f2da735a6b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI handle used to access the driver. <br /></td></tr>
<tr class="separator:ga64a4e66670e4769b51b25f2da735a6b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga629bf63426efcd5525f840636e4e0422"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga629bf63426efcd5525f840636e4e0422">aos_spi_open_func_t</a>) (<a class="el" href="group__aos__spi.html#ga5d0ee39124e135bc4f782fd3d44eb3e1">aos_spi_bus_id_t</a> bus_id)</td></tr>
<tr class="memdesc:ga629bf63426efcd5525f840636e4e0422"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic SPI opening function.  <a href="group__aos__spi.html#ga629bf63426efcd5525f840636e4e0422">More...</a><br /></td></tr>
<tr class="separator:ga629bf63426efcd5525f840636e4e0422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf472f47c18b270ebdd6c9ff37eee5f4d"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gaf472f47c18b270ebdd6c9ff37eee5f4d">aos_spi_close_func_t</a>) (<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl)</td></tr>
<tr class="memdesc:gaf472f47c18b270ebdd6c9ff37eee5f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic SPI closing function.  <a href="group__aos__spi.html#gaf472f47c18b270ebdd6c9ff37eee5f4d">More...</a><br /></td></tr>
<tr class="separator:gaf472f47c18b270ebdd6c9ff37eee5f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1dfa5713280cc8851a42f48b52497fd1"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga1dfa5713280cc8851a42f48b52497fd1">aos_spi_read_func_t</a>) (<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, uint8_t *data, unsigned len)</td></tr>
<tr class="memdesc:ga1dfa5713280cc8851a42f48b52497fd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic SPI Read function.  <a href="group__aos__spi.html#ga1dfa5713280cc8851a42f48b52497fd1">More...</a><br /></td></tr>
<tr class="separator:ga1dfa5713280cc8851a42f48b52497fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac0cf9045ad878b71ca5e52f6438dbb2e"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gac0cf9045ad878b71ca5e52f6438dbb2e">aos_spi_write_func_t</a>) (<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, uint8_t *data, unsigned len)</td></tr>
<tr class="memdesc:gac0cf9045ad878b71ca5e52f6438dbb2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic SPI Write function.  <a href="group__aos__spi.html#gac0cf9045ad878b71ca5e52f6438dbb2e">More...</a><br /></td></tr>
<tr class="separator:gac0cf9045ad878b71ca5e52f6438dbb2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e9eccc3081dd2cceb70ee4b11c0f208"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga0e9eccc3081dd2cceb70ee4b11c0f208">aos_spi_xfer_func_t</a>) (<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, uint8_t *tx_data, uint8_t *rx_data, unsigned len)</td></tr>
<tr class="memdesc:ga0e9eccc3081dd2cceb70ee4b11c0f208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic SPI transfer (read/write) function.  <a href="group__aos__spi.html#ga0e9eccc3081dd2cceb70ee4b11c0f208">More...</a><br /></td></tr>
<tr class="separator:ga0e9eccc3081dd2cceb70ee4b11c0f208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ec0053be2713b56b0ac75978b612e06"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga5ec0053be2713b56b0ac75978b612e06">aos_spi_ioctl_func_t</a>) (<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, <a class="el" href="structaos__spi__ioctl__t.html">aos_spi_ioctl_t</a> *ioctl)</td></tr>
<tr class="memdesc:ga5ec0053be2713b56b0ac75978b612e06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic SPI IO control function.  <a href="group__aos__spi.html#ga5ec0053be2713b56b0ac75978b612e06">More...</a><br /></td></tr>
<tr class="separator:ga5ec0053be2713b56b0ac75978b612e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga5d0ee39124e135bc4f782fd3d44eb3e1"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga5d0ee39124e135bc4f782fd3d44eb3e1">aos_spi_bus_id_t</a> { <a class="el" href="group__aos__spi.html#gga5d0ee39124e135bc4f782fd3d44eb3e1acdc7b278f724ea2c8055184c4350b6d8">aos_spi_bus_id_internal</a>, 
<a class="el" href="group__aos__spi.html#gga5d0ee39124e135bc4f782fd3d44eb3e1a0ca0f989dde0ac5e0c03ba2b562d270b">aos_spi_bus_id_external</a>, 
<a class="el" href="group__aos__spi.html#gga5d0ee39124e135bc4f782fd3d44eb3e1a0157991e47d6494eff8b5d60809e809c">aos_spi_bus_id_count</a>
 }</td></tr>
<tr class="memdesc:ga5d0ee39124e135bc4f782fd3d44eb3e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI BUS identifier.  <a href="group__aos__spi.html#ga5d0ee39124e135bc4f782fd3d44eb3e1">More...</a><br /></td></tr>
<tr class="separator:ga5d0ee39124e135bc4f782fd3d44eb3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55b4b825a4d4c60242e0fa5f57d40805"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a> { <a class="el" href="group__aos__spi.html#gga55b4b825a4d4c60242e0fa5f57d40805a7cfca8c29515fe28a59b784ad4072b5f">aos_spi_status_success</a> = 0, 
<a class="el" href="group__aos__spi.html#gga55b4b825a4d4c60242e0fa5f57d40805ab73f7b7b6f23eb76a24b6b99ae68f9c1">aos_spi_status_error</a>, 
<a class="el" href="group__aos__spi.html#gga55b4b825a4d4c60242e0fa5f57d40805af31a338c7a205b201160fc6cc8154536">aos_spi_status_lock_fail</a>, 
<a class="el" href="group__aos__spi.html#gga55b4b825a4d4c60242e0fa5f57d40805ad6404f7f62051b496f0709b990cc7045">aos_spi_status_not_implemented</a>
 }</td></tr>
<tr class="memdesc:ga55b4b825a4d4c60242e0fa5f57d40805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return status of API functions.  <a href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">More...</a><br /></td></tr>
<tr class="separator:ga55b4b825a4d4c60242e0fa5f57d40805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga14c8dfeea17eac6885109d5081d886aa"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga14c8dfeea17eac6885109d5081d886aa">aos_spi_ioctl_req_t</a> { <a class="el" href="group__aos__spi.html#gga14c8dfeea17eac6885109d5081d886aaa2d306c94dd72f8174ef6c2cc0bf63b32">aos_spi_ioctl_req_set_io_timeout</a>
 }</td></tr>
<tr class="memdesc:ga14c8dfeea17eac6885109d5081d886aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">IO controls supported but the driver.  <a href="group__aos__spi.html#ga14c8dfeea17eac6885109d5081d886aa">More...</a><br /></td></tr>
<tr class="separator:ga14c8dfeea17eac6885109d5081d886aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6780a01ffb499681b4ff4a255b5f5522"><td class="memItemLeft" align="right" valign="top"><a id="ga6780a01ffb499681b4ff4a255b5f5522"></a>
const <a class="el" href="structaos__spi__master__t.html">aos_spi_master_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga6780a01ffb499681b4ff4a255b5f5522">aos_spi_master</a> (void)</td></tr>
<tr class="memdesc:ga6780a01ffb499681b4ff4a255b5f5522"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export the generic driver. <br /></td></tr>
<tr class="separator:ga6780a01ffb499681b4ff4a255b5f5522"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf81398f9775695df0b172367651ca3e6"><td class="memItemLeft" align="right" valign="top"><a id="gaf81398f9775695df0b172367651ca3e6"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gaf81398f9775695df0b172367651ca3e6">MX_SPI1_Init</a> (void)</td></tr>
<tr class="memdesc:gaf81398f9775695df0b172367651ca3e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the SPI 1 hardware. <br /></td></tr>
<tr class="separator:gaf81398f9775695df0b172367651ca3e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea85daa666c03d85fd59edef711ebb08"><td class="memItemLeft" align="right" valign="top"><a id="gaea85daa666c03d85fd59edef711ebb08"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gaea85daa666c03d85fd59edef711ebb08">MX_SPI2_Init</a> (void)</td></tr>
<tr class="memdesc:gaea85daa666c03d85fd59edef711ebb08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the SPI 2 hardware. <br /></td></tr>
<tr class="separator:gaea85daa666c03d85fd59edef711ebb08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga9c6222bae4d0328dd843ae099623b40b"><td class="memItemLeft" align="right" valign="top">SPI_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#ga9c6222bae4d0328dd843ae099623b40b">hspi1</a></td></tr>
<tr class="memdesc:ga9c6222bae4d0328dd843ae099623b40b"><td class="mdescLeft">&#160;</td><td class="mdescRight">STM32 SPI definitions.  <a href="group__aos__spi.html#ga9c6222bae4d0328dd843ae099623b40b">More...</a><br /></td></tr>
<tr class="separator:ga9c6222bae4d0328dd843ae099623b40b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9da65f935e805137e2eb4e18c5ab224"><td class="memItemLeft" align="right" valign="top"><a id="gab9da65f935e805137e2eb4e18c5ab224"></a>
SPI_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__aos__spi.html#gab9da65f935e805137e2eb4e18c5ab224">hspi2</a></td></tr>
<tr class="memdesc:gab9da65f935e805137e2eb4e18c5ab224"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI bus 2. <br /></td></tr>
<tr class="separator:gab9da65f935e805137e2eb4e18c5ab224"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaa8524f178aa45b211fe3c77046fc341c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8524f178aa45b211fe3c77046fc341c">&#9670;&nbsp;</a></span>CONFIG_SPI_IO_POLLING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_SPI_IO_POLLING&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Driver mode. </p>
<p>This driver supports polling-, interrupt- and DMA-driven transactions. Pick your poison, according to your needs.</p>
<p>XXX: Only the polling driver has currently been tested, and even that is not fully conclusive until we have a SPI device driver that actually works (ie, lr1110). Changing the mode probably requires regenerating the CubeMX SPI HAL initialization code with different options. Least resource usage, keeps cpu busy (full power) until I/O is done. </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gaf472f47c18b270ebdd6c9ff37eee5f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf472f47c18b270ebdd6c9ff37eee5f4d">&#9670;&nbsp;</a></span>aos_spi_close_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(* aos_spi_close_func_t)(<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic SPI closing function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_hdl</td><td>SPI bus handle </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the operation </dd></dl>

</div>
</div>
<a id="ga5ec0053be2713b56b0ac75978b612e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ec0053be2713b56b0ac75978b612e06">&#9670;&nbsp;</a></span>aos_spi_ioctl_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(* aos_spi_ioctl_func_t)(aos_spi_handle_tspi_hdl, <a class="el" href="structaos__spi__ioctl__t.html">aos_spi_ioctl_t</a> *ioctl)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic SPI IO control function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_hdl</td><td>SPI bus handle </td></tr>
    <tr><td class="paramname">ioctl</td><td>IO control information </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the operation </dd></dl>

</div>
</div>
<a id="ga629bf63426efcd5525f840636e4e0422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga629bf63426efcd5525f840636e4e0422">&#9670;&nbsp;</a></span>aos_spi_open_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a>(* aos_spi_open_func_t) (<a class="el" href="group__aos__spi.html#ga5d0ee39124e135bc4f782fd3d44eb3e1">aos_spi_bus_id_t</a> bus_id)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic SPI opening function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bus_id</td><td>SPI bus identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the SPI handle that will be used to access the other functions </dd></dl>

</div>
</div>
<a id="ga1dfa5713280cc8851a42f48b52497fd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1dfa5713280cc8851a42f48b52497fd1">&#9670;&nbsp;</a></span>aos_spi_read_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(* aos_spi_read_func_t)(<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, uint8_t *data, unsigned len)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic SPI Read function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_hdl</td><td>SPI bus handle </td></tr>
    <tr><td class="paramname">data</td><td>Buffer where to store the data read. </td></tr>
    <tr><td class="paramname">len</td><td>Maximum size that can handle the data buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the operation </dd></dl>

</div>
</div>
<a id="gac0cf9045ad878b71ca5e52f6438dbb2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac0cf9045ad878b71ca5e52f6438dbb2e">&#9670;&nbsp;</a></span>aos_spi_write_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(* aos_spi_write_func_t)(<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, uint8_t *data, unsigned len)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic SPI Write function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_hdl</td><td>SPI bus handle </td></tr>
    <tr><td class="paramname">data</td><td>Buffer containing the data to be written </td></tr>
    <tr><td class="paramname">len</td><td>Number of data to write </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the operation </dd></dl>

</div>
</div>
<a id="ga0e9eccc3081dd2cceb70ee4b11c0f208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e9eccc3081dd2cceb70ee4b11c0f208">&#9670;&nbsp;</a></span>aos_spi_xfer_func_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a>(* aos_spi_xfer_func_t)(<a class="el" href="group__aos__spi.html#ga64a4e66670e4769b51b25f2da735a6b7">aos_spi_handle_t</a> spi_hdl, uint8_t *tx_data, uint8_t *rx_data, unsigned len)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generic SPI transfer (read/write) function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">spi_hdl</td><td>SPI bus handle </td></tr>
    <tr><td class="paramname">tx_data</td><td>Buffer containing the data to be written </td></tr>
    <tr><td class="paramname">rx_data</td><td>Buffer where to store the data read. </td></tr>
    <tr><td class="paramname">len</td><td>Number of data to write and read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the operation </dd></dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga5d0ee39124e135bc4f782fd3d44eb3e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5d0ee39124e135bc4f782fd3d44eb3e1">&#9670;&nbsp;</a></span>aos_spi_bus_id_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__aos__spi.html#ga5d0ee39124e135bc4f782fd3d44eb3e1">aos_spi_bus_id_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>SPI BUS identifier. </p>
<dl class="section note"><dt>Note</dt><dd>Do not use the internal SPI bus. Reserved for AOS </dd></dl>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga5d0ee39124e135bc4f782fd3d44eb3e1acdc7b278f724ea2c8055184c4350b6d8"></a>aos_spi_bus_id_internal&#160;</td><td class="fielddoc"><p>The module internal SPI bus. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5d0ee39124e135bc4f782fd3d44eb3e1a0ca0f989dde0ac5e0c03ba2b562d270b"></a>aos_spi_bus_id_external&#160;</td><td class="fielddoc"><p>The module external SPI bus. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5d0ee39124e135bc4f782fd3d44eb3e1a0157991e47d6494eff8b5d60809e809c"></a>aos_spi_bus_id_count&#160;</td><td class="fielddoc"><p>Number of SPI bus. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga14c8dfeea17eac6885109d5081d886aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga14c8dfeea17eac6885109d5081d886aa">&#9670;&nbsp;</a></span>aos_spi_ioctl_req_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__aos__spi.html#ga14c8dfeea17eac6885109d5081d886aa">aos_spi_ioctl_req_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IO controls supported but the driver. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga14c8dfeea17eac6885109d5081d886aaa2d306c94dd72f8174ef6c2cc0bf63b32"></a>aos_spi_ioctl_req_set_io_timeout&#160;</td><td class="fielddoc"><p>I/O Timeout, value = timeout (ms) </p>
</td></tr>
</table>

</div>
</div>
<a id="ga55b4b825a4d4c60242e0fa5f57d40805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55b4b825a4d4c60242e0fa5f57d40805">&#9670;&nbsp;</a></span>aos_spi_status_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__aos__spi.html#ga55b4b825a4d4c60242e0fa5f57d40805">aos_spi_status_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return status of API functions. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga55b4b825a4d4c60242e0fa5f57d40805a7cfca8c29515fe28a59b784ad4072b5f"></a>aos_spi_status_success&#160;</td><td class="fielddoc"><p>SPI operation success. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga55b4b825a4d4c60242e0fa5f57d40805ab73f7b7b6f23eb76a24b6b99ae68f9c1"></a>aos_spi_status_error&#160;</td><td class="fielddoc"><p>SPI operation error. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga55b4b825a4d4c60242e0fa5f57d40805af31a338c7a205b201160fc6cc8154536"></a>aos_spi_status_lock_fail&#160;</td><td class="fielddoc"><p>Fail to acquire the lock. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga55b4b825a4d4c60242e0fa5f57d40805ad6404f7f62051b496f0709b990cc7045"></a>aos_spi_status_not_implemented&#160;</td><td class="fielddoc"><p>Feature/command not implemented. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga9c6222bae4d0328dd843ae099623b40b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9c6222bae4d0328dd843ae099623b40b">&#9670;&nbsp;</a></span>hspi1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SPI_HandleTypeDef hspi1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>STM32 SPI definitions. </p>
<p>SPI bus 1 </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
